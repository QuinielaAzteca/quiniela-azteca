<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quiniela Azteca ‚Äì Monitor</title>

<style>
:root{
  --fg:#0f172a;
  --muted:#475569;

  --bg:#eaf3ee;
  --bg2:#dfeee7;
  --card:#ffffff;
  --line:#d7e6dc;

  --l:#0a6b3a;
  --v:#c62828;

  --rowA:#f6fbf8;
  --rowB:#eff7f2;

  --shadow:0 10px 24px rgba(2,44,20,.10);

  --okBg:#ecfdf5;
  --okBd:#bbf7d0;
  --okFg:#065f46;

  --pillBorder:#cbd5e1;
  --pillHitBg:#dcfce7;
  --pillHitBd:#86efac;
  --pillHitTx:#064e3b;

  /* anchos base */
  --wFolio:22px;
  --wNombre:200px;
  --wSel:20px;
  --wA:24px;
}

*{box-sizing:border-box}
html,body{height:100%;overflow:hidden}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(1200px 520px at 50% -140px,#fff 0%,var(--bg) 55%,var(--bg2) 100%);
  display:flex;
  flex-direction:column;
}

/* ===== HEADER ===== */
.header{
  position:sticky;
  top:0;
  z-index:50;
  background:#fff;
  border-bottom:1px solid var(--line);
  box-shadow:0 6px 14px rgba(0,0,0,.06);
}
.header-inner{
  max-width:1100px;
  margin:auto;
  padding:8px 10px;
}

.title{
  font-weight:1000;
  font-size:18px;
}
.title .mxg{color:var(--l)}
.title .mxr{color:var(--v)}
.week{font-size:12px;font-weight:900;color:var(--muted)}

.search{
  margin-top:6px;
  position:relative;
}
.search::before{
  content:"üîç";
  position:absolute;
  left:10px;
  top:50%;
  transform:translateY(-50%);
}
.search input{
  width:100%;
  padding:8px 10px 8px 36px;
  font-size:14px;
  font-weight:900;
  border:2px solid #cbd5e1;
  border-radius:14px;
  outline:none;
}

/* ===== ENCABEZADO TABLA ===== */
.tableHeadRow{
  margin-top:6px;
  border:1px solid var(--line);
  border-radius:12px;
  overflow:hidden;
  background:#f8fafc;
}
.tableHeadGrid{
  display:grid;
  grid-template-columns:var(--wFolio) var(--wNombre) repeat(9,var(--wSel)) var(--wA);
}
.thCell{
  padding:6px 4px;
  text-align:center;
  font-size:11px;
  font-weight:900;
  border-right:1px solid var(--line);
}
.thCell:last-child{border-right:none}
.thCell.left{text-align:left}

/* ===== CONTENEDOR ===== */
.wrap{
  max-width:1100px;
  margin:auto;
  padding:10px 12px;
  flex:1;
  overflow:hidden;
}

.tableBox{
  height:100%;
  overflow:auto;
  background:#fff;
  border-radius:14px;
  border:1px solid var(--line);
  overscroll-behavior:contain;
}
.tableBox::after{
  content:"";
  display:block;
  height:calc(90px + env(safe-area-inset-bottom));
}

/* ===== TABLA ===== */
table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  table-layout:fixed;
}
td{
  border-bottom:1px solid var(--line);
  padding:4px;
  text-align:center;
  font-weight:900;
}
td.col-folio{width:var(--wFolio);font-size:7px;text-align:right}
td.col-nombre{
  width:var(--wNombre);
  text-align:left;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
td.selCell{width:var(--wSel)}
td.col-ac{width:var(--wA)}

.selPill{
  display:inline-flex;
  width:18px;
  height:20px;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  border:1px solid var(--pillBorder);
  font-size:12px;
}
.selPill.hit{
  background:var(--pillHitBg);
  border-color:var(--pillHitBd);
  color:var(--pillHitTx);
}

/* ===== SIN COINCIDENCIAS ===== */
.noResults{
  padding:14px;
  text-align:center;
  color:var(--muted);
  font-weight:900;
}

/* ===== RESPONSIVE (ESTO ES LO QUE FALTABA) ===== */
@media (max-width:520px){
  :root{
    --wNombre:150px;
    --wSel:16px;
    --wA:22px;
  }
}
@media (max-width:420px){
  :root{
    --wNombre:130px;
    --wSel:15px;
    --wA:22px;
  }
}
</style>
</head>

<body>

<div class="header">
  <div class="header-inner">
    <div class="title">
      <span class="mxg">QUINIELA</span> <span class="mxr">AZTECA</span>
    </div>
    <div class="week" id="weekTxt"></div>

    <div class="search">
      <input id="searchInput" placeholder="Busca aqu√≠‚Ä¶" autocomplete="off">
    </div>

    <div class="tableHeadRow">
      <div class="tableHeadGrid">
        <div class="thCell">#</div>
        <div class="thCell left">Nombre</div>
        <div class="thCell">1</div><div class="thCell">2</div><div class="thCell">3</div>
        <div class="thCell">4</div><div class="thCell">5</div><div class="thCell">6</div>
        <div class="thCell">7</div><div class="thCell">8</div><div class="thCell">9</div>
        <div class="thCell">A</div>
      </div>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="tableBox" id="tableBox">
    <table id="tabla"><tbody></tbody></table>
  </div>
</div>

<script>
const BASE="https://script.google.com/macros/s/AKfycbyGqoqBpUMbf34qt3cMBbvlsCuf-PXqK8Dvhv7Vzj4dgzNT9pBJ0-_UHkc-IvnPqZ1Y/exec";
const ENDPOINT=BASE+"?mode=clasif";
const CONFIG=BASE+"?mode=config";

let raw=[], resultados=[];
const $=id=>document.getElementById(id);

function render(rows){
  const tbody=$("tabla").querySelector("tbody");
  tbody.innerHTML="";
  if(!rows.length){
    tbody.innerHTML=`<tr><td colspan="12" class="noResults">Sin coincidencias</td></tr>`;
    return;
  }
  rows.forEach(r=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td class="col-folio">${r.folio}</td>
      <td class="col-nombre">${r.nombre}</td>
      ${r.sels.map((s,i)=>{
        const ok=resultados[i]===s;
        return `<td class="selCell"><span class="selPill ${ok?"hit":""}">${s}</span></td>`;
      }).join("")}
      <td class="col-ac">${r.aciertos}</td>`;
    tbody.appendChild(tr);
  });
}

$("searchInput").addEventListener("keydown",e=>{
  if(e.key==="Enter"){e.preventDefault();e.target.blur();}
});

$("searchInput").addEventListener("input",()=>{
  const q=$("searchInput").value.toLowerCase();
  render(!q?raw:raw.filter(r=>
    r.nombre.toLowerCase().includes(q)||
    String(r.folio).includes(q)
  ));
});

async function load(){
  const cfg=await fetch(CONFIG).then(r=>r.json());
  $("weekTxt").textContent=cfg.cfg?.subtitulo||"";
  resultados=(cfg.cfg?.resultados||[]).slice(0,9);

  const res=await fetch(ENDPOINT).then(r=>r.json());
  raw=res.data.rows.map(r=>({
    folio:r[0],
    nombre:r[1],
    sels:r.slice(2,11),
    aciertos:r[11]
  }));
  render(raw);
}

load();
</script>
</body>
</html>
